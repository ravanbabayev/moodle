{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_lidio/merchant_dashboard

    Merchant dashboard template.

    Context variables required for this template:
    * merchant - Merchant object with details
    * strings - Array of translated strings

    Example context (json):
    {
        "merchant": {
            "id": 1,
            "company_name": "My Shop",
            "email": "merchant@example.com",
            "phone": "123-456-7890",
            "status": "approved",
            "kyc_status": "approved"
        },
        "strings": {
            "merchantdashboard": "Merchant Dashboard",
            "transactions": "Transactions",
            "settings": "Settings",
            "help": "Help"
        }
    }
}}

<div class="local-lidio-merchant-dashboard">
    <div class="alert alert-success">
        <h4 class="alert-heading">{{strings.welcome}}, {{merchant.company_name}}!</h4>
        <p>{{strings.merchantstatus_approved}}</p>
    </div>

    <div class="row">
        <!-- Left sidebar with navigation -->
        <div class="col-md-3">
            <div class="card mb-4">
                <div class="card-header">
                    {{strings.navigation}}
                </div>
                <div class="card-body p-0">
                    <div class="merchant-menu">
                        <div class="list-group list-group-flush">
                            <a href="#" class="list-group-item list-group-item-action active">
                                {{strings.dashboard}}
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                {{strings.transactions}}
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                {{strings.settings}}
                            </a>
                            <a href="#" class="list-group-item list-group-item-action">
                                {{strings.help}}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    {{strings.merchantaccountstatus}}
                </div>
                <div class="card-body">
                    <div class="merchant-status">
                        <div class="status-indicator status-{{merchant.status}}"></div>
                        <div class="status-text">
                            <p><strong>{{strings.status}}:</strong> <span class="badge badge-success">{{merchant.status}}</span></p>
                            <p><strong>{{strings.kycstatus}}:</strong> <span class="badge badge-success">{{merchant.kyc_status}}</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main content area -->
        <div class="col-md-9">
            <div class="row">
                <!-- Top stats cards -->
                <div class="col-md-4 mb-4">
                    <div class="card dashboard-stat-card">
                        <div class="card-body text-center">
                            <h3 class="stat-value">0</h3>
                            <div class="stat-label">{{strings.totaltransactions}}</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card dashboard-stat-card">
                        <div class="card-body text-center">
                            <h3 class="stat-value">â‚º0.00</h3>
                            <div class="stat-label">{{strings.totalearnings}}</div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card dashboard-stat-card">
                        <div class="card-body text-center">
                            <h3 class="stat-value">0</h3>
                            <div class="stat-label">{{strings.pendingpayments}}</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card mb-4">
                <div class="card-header">
                    {{strings.merchantinfo}}
                </div>
                <div class="card-body">
                    <div class="merchant-info">
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>{{strings.companyname}}:</strong> {{merchant.company_name}}</p>
                                <p><strong>{{strings.email}}:</strong> {{merchant.email}}</p>
                                <p><strong>{{strings.phonenumber}}:</strong> {{merchant.phone}}</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>{{strings.businessarea}}:</strong> {{merchant.business_area}}</p>
                                <p><strong>{{strings.monthlysalesvolume}}:</strong> 
                                    {{#monthly_volume_options}}
                                        {{#selected}}{{text}}{{/selected}}
                                    {{/monthly_volume_options}}
                                </p>
                                <p><strong>{{strings.website}}:</strong> 
                                    {{#merchant.website}}
                                        <a href="{{merchant.website}}" target="_blank">{{merchant.website}}</a>
                                    {{/merchant.website}}
                                    {{^merchant.website}}
                                        {{strings.nodatayet}}
                                    {{/merchant.website}}
                                </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-12">
                                <a href="{{actionurl}}?edit=1" class="btn btn-outline-primary">{{strings.updateapplication}}</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    {{strings.transactionhistory}}
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        {{strings.norecords}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.local-lidio-merchant-dashboard {
    max-width: 1200px;
    margin: 0 auto;
}
.status-indicator {
    width: 15px;
    height: 15px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 10px;
}
.status-pending {
    background-color: #ffc107;
}
.status-approved {
    background-color: #28a745;
}
.status-rejected {
    background-color: #dc3545;
}
.dashboard-stat-card {
    transition: all 0.3s ease;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.dashboard-stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.1);
}
.stat-value {
    font-size: 2em;
    font-weight: bold;
    margin-bottom: 10px;
    color: #007bff;
}
.stat-label {
    color: #6c757d;
    font-size: 1em;
}
.badge-success {
    background-color: #28a745;
}
</style> 